# poc

Proof of concept. This project runs locally only.

### Requirements:

- node v16n
- npm 8
- metamask installed

### Setup:

- run npm i in each folder
- Create a file backend/.env and add infura api key and secret:

                INFURA_API_KEY='xxxxx'
                INFURA_API_SECRET='xxxxxx'

#### To start, run these commands in their own terminals:

- npm run start:blockchain
- npm run start:backend
- (wait 5 seconds for blockchain to load and deploy)
- npm run start:frontend

Note that the deploy script in smart-contracts also copies contract address and abi to frontend (that's why you have to wait 5 seconds).

### Setup metamask:

- switch metamask to local host network 8545
- import the following private key to metamask:

        0xdf57089febbacf7ba0bc227dafbffa9fc08a93fdc68e1e42411a14efcf23656e

  (This is a test account generated by the hardhat node local network. Do NOT send any ethererum or any currency to it!)

- you should now be able to interact with the locally deployed contract and server via the frontend.

### Debugging:

Most errors will appear in the one of the 3 terminals you have open or also in the browser console.
It is quite common to get Metamask errors about "already in queue" or "Nonce to high". This happens quite frequently - in this case you need to reset Metamask. This is done by:

- Open metamask
- Click your account circle (top right)
- click Settings
- click Advanced
- scroll down to the big red RESET button and click it.

### Tests:

At the moment there are only tests for the smart contracts. To run these:

- navigate to /smart-contracts
- run

        npx hardhat test

### About the demo:

After following the instructions above, the demo app should start in your browser. It will have seeded two review invites for you - these represent two articles that have been created by another author who ahs invited you to review them. You can see them in the reviews tab.

You can create a new research output in the Create New Output Tab. After signing with metamask, you should then be able to search for it by ID in the Read Public Outputs tab or see it listed in My Outputs. Since the 2 seeded outputs exist, the ID for the one you just created is 3.
